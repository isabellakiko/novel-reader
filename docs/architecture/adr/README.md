# ADR（架构决策记录）索引

> Architecture Decision Records - 记录重大架构决策

**最后更新**: 2025-12-02

---

## 什么是 ADR？

ADR (Architecture Decision Record) 是一种记录重大架构决策的方法：
- **背景**：为什么需要做这个决策
- **决策**：最终选择了什么方案
- **理由**：为什么选择这个方案
- **后果**：这个决策带来的影响

---

## ADR 列表

| 编号 | 标题 | 状态 | 日期 |
|------|------|------|------|
| ADR-001 | 纯前端架构 | 已接受 | 2025-12-02 |
| ADR-002 | Monorepo 结构 | 已接受 | 2025-12-02 |
| ADR-003 | 状态管理方案 | 已接受 | 2025-12-02 |

---

## ADR-001: 纯前端架构

**日期**: 2025-12-02
**状态**: 已接受

### 背景
需要决定是否需要后端服务器来处理文件解析和搜索。

### 决策
当前阶段采用纯前端架构，所有处理在浏览器完成。

### 理由
- 99% 小说文件 < 50MB，浏览器能处理
- IndexedDB 可存储本地数据
- Web Worker 避免 UI 阻塞
- 无需服务器部署

### 后果
- **正面**：部署简单，用户体验好
- **负面**：大文件（>100MB）处理受限
- **预留**：apps/server 目录预留后端扩展

---

## ADR-002: Monorepo 结构

**日期**: 2025-12-02
**状态**: 已接受

### 背景
需要决定项目的代码组织方式。

### 决策
使用 pnpm workspace 的 Monorepo 结构。

### 理由
- 核心逻辑可被前后端共享
- 统一管理更方便
- 便于后续扩展

### 后果
- **正面**：代码复用方便，依赖管理统一
- **负面**：初始配置稍复杂

---

## ADR-003: 状态管理方案

**日期**: 2025-12-02
**状态**: 已接受

### 背景
需要决定状态管理方案。

### 决策
分层状态管理：
- UI 状态 → useState
- 应用状态 → Zustand
- 持久化 → Dexie (IndexedDB)

### 理由
- Zustand 轻量简单
- 不需要 Redux 的复杂度
- IndexedDB 适合存储书籍等大数据

### 后果
- **正面**：简单易用，性能好
- **负面**：需要学习 Dexie API

---

## 创建新 ADR

使用模板：[template.md](./template.md)

```bash
# 命名规范
ADR-XXX: [标题].md
```
