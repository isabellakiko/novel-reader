# é¡¹ç›®ä¸Šä¸‹æ–‡ï¼ˆAI å¿«é€Ÿæ¢å¤ï¼‰

> AI åä½œè®°å¿†æ–‡ä»¶ - å¿«é€Ÿæ¢å¤é¡¹ç›®ä¸Šä¸‹æ–‡ï¼Œç«‹å³å¼€å§‹å·¥ä½œ

**æœ€åæ›´æ–°**: 2025-12-04
**é¡¹ç›®é˜¶æ®µ**: Phase 5 å…¨éƒ¨å®Œæˆ âœ…
**å½“å‰çŠ¶æ€**: 1.0 ç‰ˆæœ¬å‘å¸ƒ

---

## TL;DRï¼ˆ30ç§’é€Ÿè§ˆï¼‰

**é¡¹ç›®åç§°**: Novel Readerï¼ˆå°è¯´é˜…è¯»å™¨ï¼‰
**é¡¹ç›®æ€§è´¨**: å…¨æ ˆå°è¯´é˜…è¯»å™¨ï¼Œæ”¯æŒæœ¬åœ°å­˜å‚¨ + äº‘ç«¯åŒæ­¥
**æ¶æ„æ¨¡å¼**: Monorepoï¼ˆå‰ç«¯ + åç«¯ + æ ¸å¿ƒåŒ…ï¼‰

**æŠ€æœ¯æ ˆ**:
- **å‰ç«¯**: React 18 + Vite 5 + Tailwind CSS + Zustand + IndexedDB (Dexie)
- **åç«¯**: Spring Boot 3.4.5 + Java 21 + JWT + PostgreSQL/H2
- **æ ¸å¿ƒåŒ…**: çº¯ JS è§£æåº“ï¼ˆç¼–ç æ£€æµ‹ã€ç« èŠ‚è¯†åˆ«ã€æœç´¢å¼•æ“ï¼‰

**æ ¸å¿ƒç‰¹ç‚¹**:
- å¤šç¼–ç æ”¯æŒï¼ˆTXT GBK/UTF-8/Big5 è‡ªåŠ¨æ£€æµ‹ï¼Œ32MB <100msï¼‰
- å¼ºå¤§çš„å…¨å±€æœç´¢ï¼ˆ4 ç§æ¨¡å¼ï¼šæ¦‚è§ˆ/è¯¦ç»†/é¢‘ç‡/æ—¶é—´çº¿ï¼‰
- åŒæ¨¡å¼å­˜å‚¨ï¼ˆæœ¬åœ° IndexedDB + äº‘ç«¯åŒæ­¥ï¼‰
- ç”¨æˆ·è®¤è¯ï¼ˆJWT ç™»å½•/æ³¨å†Œï¼‰
- ç²¾ç¾ç°ä»£çš„ UIï¼ˆ3D ä¹¦ç±å¡ç‰‡ã€Framer Motion åŠ¨ç”»ï¼‰

**å¼€å‘è¿›åº¦**: Phase 5 å…¨éƒ¨å®Œæˆ âœ… 1.0 ç‰ˆæœ¬å‘å¸ƒ
**ä¸‹ä¸€æ­¥**: å¯é€‰æ‰©å±•ï¼ˆå¯¼å‡ºåŠŸèƒ½ã€EPUB/PDF æ”¯æŒï¼‰

---

## é¡¹ç›®æœ¬è´¨

è¿™æ˜¯ä¸€ä¸ª **å…¨æ ˆå°è¯´é˜…è¯»å™¨**ï¼Œä¸»è¦åŠŸèƒ½ï¼š

- **æ–‡ä»¶è§£æ**ï¼šTXTï¼ˆå¤šç¼–ç è‡ªåŠ¨æ£€æµ‹ï¼Œ32MB æ–‡ä»¶ <100msï¼‰
- **å…¨å±€æœç´¢**ï¼š4 ç§æœç´¢æ¨¡å¼ï¼ŒWeb Worker åå°å¤„ç†
- **é˜…è¯»ä½“éªŒ**ï¼šå­—ä½“è®¾ç½®ã€ä¸»é¢˜åˆ‡æ¢ã€è¿›åº¦è®°å¿†ã€ä¹¦ç­¾
- **åŒæ¨¡å¼å­˜å‚¨**ï¼šæœ¬åœ° IndexedDB + äº‘ç«¯ PostgreSQL
- **ç”¨æˆ·è®¤è¯**ï¼šJWT ç™»å½•æ³¨å†Œï¼Œå¤šè®¾å¤‡åŒæ­¥

**è®¾è®¡ç†å¿µ**:
- ç¦»çº¿ä¼˜å…ˆï¼Œæœ¬åœ°é˜…è¯»æ— éœ€ç½‘ç»œ
- ç™»å½•åå¯é€‰äº‘ç«¯åŒæ­¥
- å‰åç«¯å®Œå…¨åˆ†ç¦»ï¼ŒAPI é©±åŠ¨

---

## å½“å‰å¼€å‘çŠ¶æ€

### âœ… å·²å®Œæˆ

**Phase 1: åŸºç¡€æ­å»º**
- Monorepo ç»“æ„ï¼ˆpnpm workspaceï¼‰
- Vite + React + ä¾èµ–é…ç½®
- AI åä½œç³»ç»Ÿï¼ˆ4 å±‚æ–‡æ¡£ + 6 ä¸ª Slash Commandsï¼‰

**Phase 2: æ ¸å¿ƒè§£ææ¨¡å—**
- ç¼–ç æ£€æµ‹ï¼ˆGBK/UTF-8/Big5 ç­‰ï¼‰
- TXT è§£æå™¨ï¼ˆ32MB æ–‡ä»¶ <100msï¼‰
- ç« èŠ‚è¯†åˆ«ï¼ˆ10+ ç§æ ¼å¼ï¼‰
- æœç´¢å¼•æ“ï¼ˆ4 ç§æ¨¡å¼ï¼‰

**Phase 3: å‰ç«¯åŠŸèƒ½**
- ä¹¦æ¶é¡µé¢ï¼ˆ3D å¡ç‰‡ã€å¯¼å…¥ã€åˆ é™¤ã€è¿›åº¦æ˜¾ç¤ºï¼‰
- é˜…è¯»å™¨é¡µé¢ï¼ˆç« èŠ‚å¯¼èˆªã€è®¾ç½®ã€ä¹¦ç­¾ã€å¿«æ·é”®ï¼‰
- å…¨å±€æœç´¢ï¼ˆWeb Workerã€é«˜äº®è·³è½¬ï¼‰
- ä¹¦ç­¾ç®¡ç†é¡µé¢
- ä¸»é¢˜ç³»ç»Ÿï¼ˆè‡ªåŠ¨/ç™½å¤©/å¤œé—´/æŠ¤çœ¼ï¼‰

**Phase 4: åç«¯ + å‰åç«¯å¯¹æ¥**
- Spring Boot 3 åç«¯é¡¹ç›®åˆå§‹åŒ–
- ç”¨æˆ·è®¤è¯æ¨¡å—ï¼ˆJWT + BCryptï¼‰
- ä¹¦ç±ç®¡ç†æ¨¡å—ï¼ˆä¸Šä¼ ã€è§£æã€CRUDï¼‰
- é˜…è¯»è¿›åº¦åŒæ­¥æ¨¡å—
- ä¹¦ç­¾åŒæ­¥æ¨¡å—
- å‰ç«¯ API æœåŠ¡å±‚ï¼ˆAxiosï¼‰
- Auth Store + Sync Store
- ç™»å½•/æ³¨å†Œé¡µé¢
- æœ¬åœ°/äº‘ç«¯åŒæ¨¡å¼ä¹¦æ¶
- ç¦»çº¿æ£€æµ‹ä¸æç¤º
- åŒæ­¥å†²çªå¤„ç†
- å…¨å±€ Toast é”™è¯¯å¤„ç†

**Phase 5: ä¼˜åŒ–å®Œå–„ï¼ˆå…¨éƒ¨å®Œæˆï¼‰**
- é˜…è¯»è®¾ç½®å¢å¼ºï¼ˆ8ç§èƒŒæ™¯è‰²ã€4ç§å­—ä½“ï¼‰
- æ·±è‰²æ¨¡å¼ä¼˜åŒ–ï¼ˆç³»ç»Ÿè·Ÿéšã€è¿‡æ¸¡åŠ¨ç”»ï¼‰
- ç©ºçŠ¶æ€è®¾è®¡ï¼ˆç²¾ç¾åŠ¨ç”»æ’ç”»ï¼‰
- åŠ¨ç”»ç»†èŠ‚æ‰“ç£¨ï¼ˆç»Ÿä¸€åŠ¨ç”»åº“ï¼‰
- æ„å»ºäº§ç‰©ä»£ç åˆ†å‰²ï¼ˆ4ä¸ª vendor chunksï¼‰
- è·¯ç”±æ‡’åŠ è½½ï¼ˆ7ä¸ªé¡µé¢ç‹¬ç«‹ chunkï¼‰
- ç©ºé—²æ—¶é¢„åŠ è½½æ ¸å¿ƒé¡µé¢
- é˜…è¯»ç»Ÿè®¡åŠŸèƒ½ï¼ˆå·²å†…ç½®ï¼‰

### ğŸ“‹ å¯é€‰æ‰©å±•

- å¯¼å‡ºåŠŸèƒ½
- EPUB/PDF æ”¯æŒ

---

## æŠ€æœ¯æ ˆ

### å‰ç«¯ï¼ˆapps/webï¼‰
- **æ¡†æ¶**: React 18.3.1
- **æ„å»º**: Vite 5.4.10
- **è¯­è¨€**: JavaScriptï¼ˆä¸ç”¨ TypeScriptï¼‰
- **æ ·å¼**: Tailwind CSS v3
- **åŠ¨ç”»**: Framer Motion 11
- **å›¾æ ‡**: Lucide React
- **UI ç»„ä»¶**: Radix UI
- **çŠ¶æ€ç®¡ç†**: Zustand 5
- **æœ¬åœ°å­˜å‚¨**: Dexie 4 (IndexedDB)
- **HTTP å®¢æˆ·ç«¯**: Axios
- **è·¯ç”±**: React Router 7
- **åå°ä»»åŠ¡**: Web Worker

### åç«¯ï¼ˆapps/serverï¼‰
- **æ¡†æ¶**: Spring Boot 3.4.5
- **è¯­è¨€**: Java 21
- **å®‰å…¨**: Spring Security + JWT (JJWT 0.12.6)
- **æ•°æ®åº“**: PostgreSQL (ç”Ÿäº§) / H2 (å¼€å‘)
- **ORM**: Spring Data JPA + Hibernate
- **è¿ç§»**: Flyway
- **å¯†ç **: BCrypt
- **API æ–‡æ¡£**: SpringDoc OpenAPI (Swagger)
- **å·¥å…·**: Lombok, MapStruct

### å…±äº«åŒ…
- **@novel-reader/core**: æ ¸å¿ƒé€»è¾‘ï¼ˆè§£æã€æœç´¢ï¼‰
- **@novel-reader/shared**: å…±äº«å·¥å…·å’Œå¸¸é‡

---

## ç›®å½•ç»“æ„

```
novel-reader/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ web/                # React å‰ç«¯åº”ç”¨
â”‚   â”‚   â””â”€â”€ src/
â”‚   â”‚       â”œâ”€â”€ components/ # 12+ ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ pages/      # 7 ä¸ªé¡µé¢
â”‚   â”‚       â”œâ”€â”€ stores/     # 9 ä¸ªçŠ¶æ€å­˜å‚¨
â”‚   â”‚       â”œâ”€â”€ services/   # API æœåŠ¡å±‚
â”‚   â”‚       â””â”€â”€ workers/    # Web Worker
â”‚   â””â”€â”€ server/             # Spring Boot åç«¯
â”‚       â””â”€â”€ src/main/java/com/novelreader/
â”‚           â”œâ”€â”€ controller/ # 4 ä¸ªæ§åˆ¶å™¨
â”‚           â”œâ”€â”€ service/    # 3 ä¸ªæœåŠ¡
â”‚           â”œâ”€â”€ entity/     # 6 ä¸ªå®ä½“
â”‚           â”œâ”€â”€ repository/ # 5 ä¸ªä»“åº“
â”‚           â”œâ”€â”€ security/   # JWT è®¤è¯
â”‚           â””â”€â”€ config/     # é…ç½®ç±»
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ core/               # æ ¸å¿ƒé€»è¾‘ï¼ˆè§£æã€æœç´¢ï¼‰
â”‚   â””â”€â”€ shared/             # å…±äº«å·¥å…·
â”œâ”€â”€ docs/
â”‚   â”œâ”€â”€ ai-context/         # AI è®°å¿†å±‚
â”‚   â”œâ”€â”€ development/        # å¼€å‘æ–‡æ¡£
â”‚   â”œâ”€â”€ architecture/       # æ¶æ„æ–‡æ¡£
â”‚   â””â”€â”€ project/            # é¡¹ç›®æ–‡æ¡£
â””â”€â”€ .claude/commands/       # Slash Commands
```

---

## API ç«¯ç‚¹æ¦‚è§ˆ

### è®¤è¯ API (`/api/auth`)
| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ |
|------|------|------|
| POST | /register | ç”¨æˆ·æ³¨å†Œ |
| POST | /login | ç”¨æˆ·ç™»å½• |
| GET | /me | è·å–å½“å‰ç”¨æˆ· |

### ä¹¦ç± API (`/api/books`)
| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ |
|------|------|------|
| POST | /upload | ä¸Šä¼ ä¹¦ç± |
| GET | / | è·å–ä¹¦ç±åˆ—è¡¨ |
| GET | /{id} | è·å–ä¹¦ç±è¯¦æƒ… |
| GET | /{id}/chapters/{index} | è·å–ç« èŠ‚å†…å®¹ |
| DELETE | /{id} | åˆ é™¤ä¹¦ç± |
| GET | /search | æœç´¢ä¹¦ç± |

### è¿›åº¦ API (`/api/progress`)
| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ |
|------|------|------|
| POST | / | æ›´æ–°é˜…è¯»è¿›åº¦ |
| GET | /book/{id} | è·å–ä¹¦ç±è¿›åº¦ |
| GET | / | è·å–æ‰€æœ‰è¿›åº¦ |
| GET | /recent | è·å–æœ€è¿‘é˜…è¯» |

### ä¹¦ç­¾ API (`/api/progress/bookmarks`)
| æ–¹æ³• | ç«¯ç‚¹ | è¯´æ˜ |
|------|------|------|
| POST | / | åˆ›å»ºä¹¦ç­¾ |
| GET | /book/{id} | è·å–ä¹¦ç±ä¹¦ç­¾ |
| GET | / | è·å–æ‰€æœ‰ä¹¦ç­¾ |
| DELETE | /{id} | åˆ é™¤ä¹¦ç­¾ |

---

## é¡¹ç›®çŠ¶æ€

### 1.0 ç‰ˆæœ¬å·²å®Œæˆ ğŸ‰

æ‰€æœ‰è®¡åˆ’åŠŸèƒ½å‡å·²å®Œæˆï¼š
- å…¨æ ˆå°è¯´é˜…è¯»å™¨
- æœ¬åœ° + äº‘ç«¯åŒæ¨¡å¼å­˜å‚¨
- ç²¾ç¾çš„ UI å’Œæµç•…çš„åŠ¨ç”»
- æ€§èƒ½ä¼˜åŒ–ï¼ˆä»£ç åˆ†å‰²ã€æ‡’åŠ è½½ï¼‰

### å¯é€‰æ‰©å±•
1. å¯¼å‡ºåŠŸèƒ½
2. EPUB/PDF æ”¯æŒ

---

## åä½œåå¥½ï¼ˆé‡è¦ï¼å¿…è¯»ï¼‰

### å¼€å‘èŠ‚å¥
- âœ… **æ¯æ¬¡åªæ‰§è¡Œä¸€æ­¥** - ä¸è¦ä¸€æ¬¡æ€§åšå¤ªå¤šæ”¹åŠ¨
- âœ… **è¯´æ˜åŸå› å’Œç›®çš„** - æ¯ä¸€æ­¥éƒ½è¦è§£é‡Šä¸ºä»€ä¹ˆ
- âœ… **ç­‰å¾…ç¡®è®¤** - å®Œæˆä¸€æ­¥åç­‰å¾…ç”¨æˆ·ç¡®è®¤

### è®¾è®¡é£æ ¼
- âœ… ç²¾ç¾ã€ç°ä»£ã€åŠ¨ç”»ä¸æ»‘
- âœ… äº¤äº’æµç•…ã€è§†è§‰é«˜çº§
- âŒ é¿å…è¿‡äºç®€é™‹æˆ– generic çš„è®¾è®¡

### Git æäº¤è§„èŒƒ
```
<type>(<scope>): <subject>

type: feat | fix | docs | refactor | perf | test | chore
scope: web | server | core | shared | docs
```

---

## å¿«é€Ÿå¯¼èˆª

- [å½“å‰è¿›åº¦](CURRENT.md)
- [å¼€å‘è§„èŒƒ](../development/DEVELOPMENT.md)
- [æ¶æ„æ€»è§ˆ](../architecture/OVERVIEW.md)
- [æŠ€æœ¯æ ˆè¯¦æƒ…](../architecture/tech-stack.md)
- [åç«¯ API æ–‡æ¡£](../development/backend/api.md)
- [é¡¹ç›®æ„¿æ™¯](../project/vision.md)

---

## å¿«é€Ÿæ¢å¤ä¸Šä¸‹æ–‡

```bash
/start              # å¿«é€Ÿå¯åŠ¨ï¼ˆé»˜è®¤ï¼‰
/start --full       # å®Œæ•´å¯åŠ¨ï¼ˆé¦–æ¬¡ä½¿ç”¨ï¼‰
/start --component  # ç»„ä»¶å¼€å‘æ¨¡å¼
/start --api        # åç«¯ API å¼€å‘æ¨¡å¼
```

---

**Token æ•ˆç‡**: ~3000 tokens
**æ›´æ–°é¢‘ç‡**: æ¯å‘¨æˆ–é‡å¤§å˜æ›´æ—¶
